#define SPIMEM   SPIE
#define   SS_off      PORTE.OUTCLR = PIN4_bm
#define   SS_on      PORTE.OUTSET = PIN4_bm
#define COUNT 2788
#define ADDRESS 0
#define MAX	68
#define MODE_NUM 1
#define S_NUM 1
#include "apa.c"
#include <avr/io.h>
#include <math.h>
#include <util/delay.h>
#include <avr/eeprom.h>
#include <avr/interrupt.h>
#include <avr/pgmspace.h>

void write_enable(void);
void write_byte(uint32_t, unsigned int);
unsigned int read_byte(uint32_t);

void write_enable()
{
   SS_off;
   SPIMEM.DATA = 0x06;
   //while((SPIMEM.STATUS & 1)) > 0);
   SS_on;
}

void write_byte(uint32_t address, unsigned int data)
{
   SS_off;
   SPIMEM.DATA = 0x02;
   SPIMEM.DATA = (uint8_t)((address >> 16) & 0xff);
   SPIMEM.DATA = (uint8_t)((address >> 8) & 0xff);
   SPIMEM.DATA = (uint8_t)(address & 0xff);
   SPIMEM.DATA = data;
   SS_on;
}

void write_many(uint32_t address, unsigned char *mdata, int count)
{
   SS_off;
   SPIMEM.DATA = 0x02;
   int c = count / 256;
   c++;
   for (int k = 0; k <c ;k++)
   {
	int max = (k == c-1)?count%256:256;
	write_enable();
	SS_off;
   SPIMEM.DATA = 0x02;
   //  while((SPIMEM.STATUS & 1) > 0);//Где-то здесь
   SPIMEM.DATA = (uint8_t)((address >> 16) & 0xff);
    //  while((SPIMEM.STATUS & 1) > 0);//Где-то здесь
   SPIMEM.DATA = (uint8_t)((address >> 8) & 0xff);
     // while((SPIMEM.STATUS & 1) > 0);//Где-то здесь
   SPIMEM.DATA = (uint8_t)(address & 0xff);
   //   while((SPIMEM.STATUS & 1) > 0);//Где-то здесь
	for (int i = 0; i < max; i++)
	{
		int data = pgm_read_byte(&(mdata[(k*256 + i)]));	
   SPIMEM.DATA = data;
     // while((SPIMEM.STATUS & 1) > 0); //Где-то здесь
	}
	address+=256;
	SS_on;
   }
   
}

void erase(uint32_t address)
{
   SS_off;
   SPIMEM.DATA = 0xD8;
   while(!(SPIMEM.STATUS & (1<<7)));
   SS_on;
}

unsigned char arr[2788] PROGMEM = {
100, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
0, 100, 105, 0, 105, 0, 110, 0, 90, 0, 90, 0, 90, 0, 70, 0, 45, 0, 20, 0, 15, 0, 16, 0, 12, 0, 7, 0, 8, 0, 3, 0, 4, 0, 
0, 100, 105, 0, 105, 0, 110, 0, 90, 0, 90, 0, 90, 0, 70, 0, 45, 0, 20, 0, 15, 0, 16, 0, 12, 0, 7, 0, 8, 0, 3, 0, 4, 0, 
0, 100, 105, 0, 105, 0, 110, 0, 90, 0, 90, 0, 90, 0, 70, 0, 45, 0, 20, 0, 15, 0, 16, 0, 12, 0, 7, 0, 8, 0, 3, 0, 4, 0, 
0, 100, 105, 0, 105, 0, 110, 0, 90, 0, 90, 0, 90, 0, 70, 0, 45, 0, 20, 0, 15, 0, 16, 0, 12, 0, 7, 0, 8, 0, 3, 0, 4, 0, 
0, 100, 105, 0, 105, 0, 110, 0, 90, 0, 90, 0, 90, 0, 70, 0, 45, 0, 20, 0, 15, 0, 16, 0, 12, 0, 7, 0, 8, 0, 3, 0, 4, 0, 
0, 100, 105, 0, 105, 0, 110, 0, 90, 0, 90, 0, 90, 0, 70, 0, 45, 0, 20, 0, 15, 0, 16, 0, 12, 0, 7, 0, 8, 0, 3, 0, 4, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 105, 0, 110, 0, 90, 0, 90, 0, 90, 0, 70, 0, 45, 0, 20, 0, 15, 0, 16, 0, 12, 0, 7, 0, 8, 0, 3, 0, 4, 0, 
0, 0, 0, 0, 105, 0, 110, 0, 90, 0, 90, 0, 90, 0, 70, 0, 45, 0, 20, 0, 15, 0, 16, 0, 12, 0, 7, 0, 8, 0, 3, 0, 4, 0, 
0, 0, 0, 0, 105, 0, 110, 0, 90, 0, 90, 0, 90, 0, 70, 0, 45, 0, 20, 0, 15, 0, 16, 0, 12, 0, 7, 0, 8, 0, 3, 0, 4, 0, 
0, 0, 0, 0, 105, 0, 110, 0, 90, 0, 90, 0, 90, 0, 70, 0, 45, 0, 20, 0, 15, 0, 16, 0, 12, 0, 7, 0, 8, 0, 3, 0, 4, 0, 
0, 0, 0, 0, 105, 0, 110, 0, 90, 0, 90, 0, 90, 0, 70, 0, 45, 0, 20, 0, 15, 0, 16, 0, 12, 0, 7, 0, 8, 0, 3, 0, 4, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
0, 100, 100, 0, 105, 0, 110, 0, 90, 0, 90, 0, 90, 0, 70, 0, 45, 0, 20, 0, 15, 0, 16, 0, 12, 0, 7, 0, 8, 0, 3, 0, 4, 0, 
0, 100, 100, 0, 105, 0, 110, 0, 90, 0, 90, 0, 90, 0, 70, 0, 45, 0, 20, 0, 15, 0, 16, 0, 12, 0, 7, 0, 7, 0, 3, 0, 4, 0, 
0, 100, 100, 0, 105, 0, 110, 0, 90, 0, 90, 0, 90, 0, 70, 0, 45, 0, 20, 0, 15, 0, 16, 0, 12, 0, 7, 0, 7, 0, 3, 0, 4, 0, 
0, 100, 100, 0, 105, 0, 110, 0, 90, 0, 90, 0, 90, 0, 70, 0, 45, 0, 20, 0, 15, 0, 16, 0, 12, 0, 7, 0, 7, 0, 3, 0, 4, 0, 
0, 100, 100, 0, 105, 0, 110, 0, 90, 0, 90, 0, 90, 0, 70, 0, 45, 0, 20, 0, 15, 0, 16, 0, 12, 0, 7, 0, 7, 0, 3, 0, 4, 0, 
0, 100, 100, 0, 105, 0, 110, 0, 90, 0, 90, 0, 90, 0, 70, 0, 45, 0, 20, 0, 15, 0, 16, 0, 11, 0, 7, 0, 7, 0, 3, 0, 4, 0, 
0, 100, 100, 0, 105, 0, 110, 0, 90, 0, 90, 0, 90, 0, 70, 0, 45, 0, 20, 0, 15, 0, 16, 0, 11, 0, 7, 0, 7, 0, 3, 0, 4, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 70, 0, 45, 0, 20, 0, 15, 0, 16, 0, 11, 0, 7, 0, 7, 0, 3, 0, 4, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 70, 0, 45, 0, 20, 0, 15, 0, 16, 0, 11, 0, 7, 0, 7, 0, 3, 0, 4, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 70, 0, 45, 0, 20, 0, 15, 0, 16, 0, 11, 0, 7, 0, 7, 0, 3, 0, 4, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 70, 0, 45, 0, 20, 0, 15, 0, 16, 0, 11, 0, 7, 0, 7, 0, 3, 0, 4, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 70, 0, 45, 0, 20, 0, 15, 0, 16, 0, 11, 0, 7, 0, 7, 0, 3, 0, 4, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 90, 0, 90, 0, 90, 0, 70, 0, 45, 0, 20, 0, 15, 0, 16, 0, 11, 0, 7, 0, 7, 0, 3, 0, 4, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 90, 0, 90, 0, 90, 0, 70, 0, 45, 0, 20, 0, 15, 0, 16, 0, 11, 0, 7, 0, 7, 0, 3, 0, 4, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 90, 0, 90, 0, 90, 0, 70, 0, 45, 0, 20, 0, 15, 0, 16, 0, 11, 0, 7, 0, 7, 0, 3, 0, 4, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 90, 0, 90, 0, 90, 0, 70, 0, 45, 0, 20, 0, 15, 0, 16, 0, 11, 0, 7, 0, 7, 0, 3, 0, 4, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 90, 0, 90, 0, 90, 0, 70, 0, 45, 0, 20, 0, 15, 0, 16, 0, 11, 0, 7, 0, 7, 0, 3, 0, 4, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 90, 0, 90, 0, 90, 0, 70, 0, 45, 0, 20, 0, 15, 0, 16, 0, 11, 0, 7, 0, 7, 0, 3, 0, 4, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 105, 0, 110, 0, 90, 0, 90, 0, 90, 0, 70, 0, 45, 0, 20, 0, 15, 0, 16, 0, 11, 0, 7, 0, 7, 0, 3, 0, 4, 0, 
0, 0, 0, 0, 105, 0, 110, 0, 90, 0, 90, 0, 90, 0, 70, 0, 45, 0, 20, 0, 15, 0, 16, 0, 11, 0, 7, 0, 7, 0, 3, 0, 4, 0, 
0, 0, 0, 0, 105, 0, 110, 0, 90, 0, 90, 0, 90, 0, 70, 0, 45, 0, 20, 0, 15, 0, 16, 0, 11, 0, 7, 0, 7, 0, 3, 0, 4, 0, 
0, 0, 0, 0, 105, 0, 110, 0, 90, 0, 90, 0, 90, 0, 70, 0, 45, 0, 20, 0, 15, 0, 16, 0, 11, 0, 7, 0, 7, 0, 3, 0, 4, 0, 
0, 0, 0, 0, 105, 0, 110, 0, 90, 0, 90, 0, 90, 0, 70, 0, 45, 0, 20, 0, 15, 0, 16, 0, 11, 0, 7, 0, 7, 0, 3, 0, 4, 0, 
0, 0, 0, 0, 105, 0, 110, 0, 90, 0, 90, 0, 90, 0, 70, 0, 45, 0, 20, 0, 15, 0, 16, 0, 11, 0, 7, 0, 7, 0, 3, 0, 4, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 90, 0, 70, 0, 45, 0, 20, 0, 15, 0, 16, 0, 11, 0, 7, 0, 7, 0, 3, 0, 4, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 90, 0, 70, 0, 45, 0, 20, 0, 15, 0, 16, 0, 11, 0, 7, 0, 7, 0, 3, 0, 4, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 90, 0, 70, 0, 45, 0, 20, 0, 15, 0, 16, 0, 11, 0, 7, 0, 7, 0, 3, 0, 4, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 90, 0, 70, 0, 45, 0, 20, 0, 15, 0, 16, 0, 11, 0, 7, 0, 7, 0, 3, 0, 4, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 90, 0, 70, 0, 45, 0, 20, 0, 15, 0, 16, 0, 11, 0, 7, 0, 7, 0, 3, 0, 4, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 90, 0, 70, 0, 45, 0, 20, 0, 15, 0, 16, 0, 11, 0, 7, 0, 7, 0, 3, 0, 4, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 45, 0, 20, 0, 15, 0, 16, 0, 11, 0, 7, 0, 7, 0, 3, 0, 4, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 45, 0, 20, 0, 15, 0, 16, 0, 11, 0, 7, 0, 7, 0, 3, 0, 4, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 45, 0, 20, 0, 15, 0, 16, 0, 11, 0, 7, 0, 7, 0, 3, 0, 4, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 45, 0, 20, 0, 15, 0, 16, 0, 11, 0, 7, 0, 7, 0, 3, 0, 4, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 45, 0, 20, 0, 15, 0, 16, 0, 11, 0, 7, 0, 7, 0, 3, 0, 4, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 45, 0, 20, 0, 15, 0, 16, 0, 11, 0, 7, 0, 7, 0, 3, 0, 4, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 20, 0, 15, 0, 16, 0, 11, 0, 7, 0, 7, 0, 3, 0, 4, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 20, 0, 15, 0, 16, 0, 11, 0, 12, 0, 7, 0, 3, 0, 4, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 20, 0, 15, 0, 16, 0, 11, 0, 7, 0, 7, 0, 3, 0, 4, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 20, 0, 15, 0, 16, 0, 11, 0, 12, 0, 7, 0, 3, 0, 4, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 20, 0, 15, 0, 16, 0, 11, 0, 7, 0, 7, 0, 3, 0, 4, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 90, 0, 90, 0, 90, 0, 70, 0, 45, 0, 20, 0, 15, 0, 16, 0, 11, 0, 12, 0, 7, 0, 3, 0, 4, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 90, 0, 90, 0, 90, 0, 70, 0, 45, 0, 20, 0, 15, 0, 16, 0, 11, 0, 12, 0, 7, 0, 3, 0, 4, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 90, 0, 90, 0, 90, 0, 70, 0, 45, 0, 20, 0, 15, 0, 16, 0, 11, 0, 12, 0, 7, 0, 3, 0, 4, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 90, 0, 90, 0, 90, 0, 70, 0, 45, 0, 20, 0, 15, 0, 16, 0, 11, 0, 12, 0, 7, 0, 3, 0, 4, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 90, 0, 90, 0, 90, 0, 70, 0, 45, 0, 20, 0, 15, 0, 16, 0, 11, 0, 12, 0, 7, 0, 3, 0, 4, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 90, 0, 90, 0, 90, 0, 70, 0, 45, 0, 20, 0, 15, 0, 16, 0, 11, 0, 12, 0, 7, 0, 3, 0, 4, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
0, 100, 100, 0, 105, 0, 110, 0, 90, 0, 90, 0, 90, 0, 70, 0, 45, 0, 20, 0, 15, 0, 16, 0, 11, 0, 12, 0, 7, 0, 3, 0, 4, 0, 
0, 100, 100, 0, 105, 0, 110, 0, 90, 0, 90, 0, 90, 0, 70, 0, 45, 0, 20, 0, 15, 0, 16, 0, 11, 0, 12, 0, 7, 0, 3, 0, 4, 0, 
0, 100, 100, 0, 105, 0, 110, 0, 90, 0, 90, 0, 90, 0, 70, 0, 45, 0, 20, 0, 15, 0, 16, 0, 11, 0, 12, 0, 7, 0, 3, 0, 4, 0, 
0, 100, 100, 0, 105, 0, 110, 0, 90, 0, 90, 0, 90, 0, 70, 0, 45, 0, 20, 0, 15, 0, 16, 0, 11, 0, 12, 0, 7, 0, 3, 0, 4, 0, 
0, 100, 100, 0, 105, 0, 110, 0, 90, 0, 90, 0, 90, 0, 70, 0, 45, 0, 20, 0, 15, 0, 16, 0, 11, 0, 12, 0, 7, 0, 3, 0, 4, 0, 
0, 100, 100, 0, 105, 0, 110, 0, 90, 0, 90, 0, 90, 0, 70, 0, 45, 0, 20, 0, 15, 0, 16, 0, 11, 0, 12, 0, 7, 0, 3, 0, 4, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
0, 100, 100, 0, 105, 0, 110, 0, 90, 0, 90, 0, 90, 0, 70, 0, 45, 0, 20, 0, 15, 0, 16, 0, 11, 0, 12, 0, 7, 0, 3, 0, 4, 0, 
0, 100, 100, 0, 105, 0, 110, 0, 90, 0, 90, 0, 90, 0, 70, 0, 45, 0, 20, 0, 15, 0, 16, 0, 11, 0, 12, 0, 7, 0, 3, 0, 4, 0, 
0, 100, 100, 0, 105, 0, 110, 0, 90, 0, 90, 0, 90, 0, 70, 0, 45, 0, 20, 0, 15, 0, 16, 0, 11, 0, 12, 0, 7, 0, 3, 0, 4, 0, 
0, 100, 100, 0, 105, 0, 110, 0, 90, 0, 90, 0, 90, 0, 70, 0, 45, 0, 20, 0, 15, 0, 16, 0, 11, 0, 12, 0, 7, 0, 3, 0, 4, 0, 
0, 100, 100, 0, 105, 0, 110, 0, 90, 0, 90, 0, 90, 0, 70, 0, 45, 0, 20, 0, 15, 0, 16, 0, 11, 0, 12, 0, 7, 0, 3, 0, 4, 0, 
0, 100, 100, 0, 105, 0, 110, 0, 90, 0, 90, 0, 90, 0, 70, 0, 45, 0, 20, 0, 15, 0, 16, 0, 11, 0, 12, 0, 7, 0, 3, 0, 4, 0};


unsigned int read_byte(uint32_t address)
{
   SS_off;
   SPIMEM.DATA = 0x03;
   //while(!(SPIMEM.STATUS & (1<<7)));
   SPIMEM.DATA = (uint8_t)((address >> 16) & 0xff);
   //while(!(SPIMEM.STATUS & (1<<7)));
   SPIMEM.DATA = (uint8_t)((address >> 8) & 0xff);
   //while(!(SPIMEM.STATUS & (1<<7)));
   SPIMEM.DATA = (uint8_t)(address  & 0xff);
   //while(!(SPIMEM.STATUS & (1<<7)));
   SS_on;
   
   return  SPIMEM.DATA;
}

void do_chess ()
{
	int i, j;
	for(i=0; i<81; i++){ //подставить число столбцов!
		
		for (j = 0; j<34; j++){
				setpixel_cv(read_byte(ADDRESS + i*34+j),j);
		}
		showstrip();
		if (i%20 == 0) 
		{
			if (check_button()==1) return;
		}
		_delay_ms(10);
	}
}

int main (void)
{
   init();
   PORTE.DIRSET = 0xB0;  // configure MOSI, SS, CLK as outputs on PORTE
	// enable SPI master mode, CLK/64 (@32MHz=>500KHz)
   SPIE.CTRL = SPI_ENABLE_bm | SPI_MASTER_bm | SPI_MODE_0_gc | SPI_PRESCALER_DIV128_gc;
   sei();
   while ((SPIE.STATUS & 0x80)>0) {   SPIE.DATA; }
   write_enable();
   erase(0);
   write_enable();
   setpixel_cv(20,1);
   showstrip();
   write_enable();
   //write_many(ADDRESS, arr, COUNT); //Виснет здесь.
   write_byte(ADDRESS,100);
   drop();
   setpixel_cv(read_byte(ADDRESS)+5,1);
   showstrip();
   _delay_ms(1000);
   while(1)
   {
	//do_chess();
   }
}